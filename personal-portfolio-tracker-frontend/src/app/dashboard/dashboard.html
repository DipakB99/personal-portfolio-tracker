<!-- Header Section -->
<p-menubar [model]="menuItems">
  <ng-template pTemplate="start">
    <div class="header-start">
      <i class="pi pi-chart-line icon"></i>
      <span class="app-title">Portfolio Tracker Application</span>
    </div>
  </ng-template>

  <ng-template pTemplate="end">
    <div class="header-end">
      <p-avatar [image]="profileImageApiUrl + user?.profileImage || 'default-image.jpg'" shape="circle" size="large"
        class="avatar"></p-avatar>

      <span class="user-name">{{ user?.firstName }} {{ user?.lastName?.charAt(0) }}.</span>

      <button pButton class="p-button-sm p-button-danger" label="Logout" (click)="logout()"></button>

      <button pButton label="View Portfolio" class="p-button-sm p-button-info" (click)="showPortfolio = true"></button>
    </div>
  </ng-template>
</p-menubar>


<!-- Main Card -->
<div class="p-card main-info-card" *ngIf="user">
  <div class="p-card-header">
    <h4>User Details</h4>
  </div>
  <div class="p-card-body">
    <p><strong>Name:</strong> {{ user.firstName + ' ' + user?.lastName }} </p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>Mobile:</strong> {{ user.mobile }}</p>
    <p><strong>DOB:</strong> {{ user.dob | date: 'dd/MM/yyyy' }}</p>
  </div>
</div>

<!-- Portfolio Dialog -->
<p-dialog header="Your Portfolio" [(visible)]="showPortfolio" [modal]="true" [style]="{width: '50vw', height: '60vh'}">
  <p-dropdown [options]="tenures" [(ngModel)]="selectedTenure"
    (onChange)="loadPortfolioData(selectedTenure)"></p-dropdown>
  <kendo-chart>
    <kendo-chart-category-axis>
      <kendo-chart-category-axis-item [categories]="categoryDates">
      </kendo-chart-category-axis-item>
    </kendo-chart-category-axis>
    <kendo-chart-series>
      <kendo-chart-series-item [data]="portfolioValues" type="line" name="Portfolio Value">
      </kendo-chart-series-item>
    </kendo-chart-series>
  </kendo-chart>
</p-dialog>